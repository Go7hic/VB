---
layout: post
title: CSS Replaced Element
date: 2015-08-30 11:21:04
tags: css
---
 前端发展越来越快，很多前端人员也越来越忽视 css 重要性， 我相信很多前端新手都不敢说熟悉 css 的全部概念，甚至包括几年的前端也不一定了解，所以最近花时间做了一次 css 巡礼，把 一些不熟的东西再去看了一遍，今天来看看 css 置换元素。
 
 CSS 里，可替换元素是这样一些元素， 其展现不是由CSS来控制的。这些外部元素的展现不依赖于CSS规范。 典型的可替换元素有 `<img>`、 `<object>`、 `<video>` 以及 `<textarea>`、 `<input>` 这样的表单元素。 一些元素，比如 `<audio>` 和 `<canvas>` ，只在一些特殊情况下是可替换元素。 使用了 CSS content 属性插入的对象被称作匿名的可替换元素。

CSS在某些情况下会对可替换元素做特殊处理，比如计算外边距和处理值为 auto 的情况。

需要注意的是，一部分（并非全部）可替换元素，本身具有尺寸和基线，会被一些 CSS 属性用到，比如 vertical-align。

上面是 MDN 的介绍了。我们仔细看可以发现，上面那些可置换元素是有规律的，他们分为媒体标签元素（img,video 等）和输入标签元素(input)。而且除了 input 和 textarea 两个是 inline-block 级元素，其余的几个媒体标签都为 行内级元素，也就是 display 属性为 inline 的。

那么问题来了，在很多人的心里，认为的是行内级元素是不可以设置宽高的，但是很明显直接给 img 和 video 这些元素设置宽高我们都做过，这不是打脸嘛。这里面主要原因就是因为 img,video 这些是不仅是行内元素还是置换元素，对于行内级置换元素来说，其宽度的设置需遵循以下几点：
- 若宽高的计算值都为 auto 且元素有固有宽度，则 width 的使用值为该固有宽度；
- 典型的例子是：拥有默认宽高的 input 当宽度的计算值为auto时，则宽度使用值为其默认的固有宽度
- 若宽度的计算值为 auto 且元素有固有宽度，则 width 的使用值为该固有宽度；
例子同上
- 若宽度的计算值为 auto 且高度有 非auto 的计算值，并且元素有固有宽高比，则 width 的使用值为 高度使用值 * 固有宽高比；
- 典型的例子：img 当只定义了其高度值时，其宽度将会根据固有宽高比进行等比设置
- 除此之外，当 width 的计算值为 auto 时，则宽度的使用值为 300px
典型的例子：比如iframe, canvas
- 其它类型的置换元素，其宽度的定义都参照行内置换元素的定义。

对于行内级置换元素来说，其高度的设置需遵循以下几点：
- 若宽高的计算值都为 auto 且元素有固有高度，则 height 的使用值为该固有高度；
- 若高度的计算值为 auto 且元素有固有高度，则 height 的使用值为该固有高度；
- 若高度的计算值为 auto 且宽度有 非auto 的计算值，并且元素有固有宽高比，则 height 的使用值为：宽度使用值 / 固有宽高比；
- 若高度的计算值为 auto 且上述条件完全不符，则 height 的使用值 不能大于150px，且宽度不能大于长方形高度的2倍。
- 其它类型的置换元素，其高度的定义都参照行内置换元素的定义。

所以把这个概念搞清楚了，也把另一个坑给避免了，下次别人问的时候千万别直接说行内元素不可以设置宽高，这里面还有可置换元素这些特殊的元素是可以设置宽高的。


